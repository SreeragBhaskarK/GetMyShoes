<!DOCTYPE html>
<html lang="en">

<head>
	<!--===============================================================================================-->

	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/vendor/bootstrap/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/vendor/animate/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/vendor/css-hamburgers/hamburgers.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/vendor/select2/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/login/css/util.css">
	<link rel="stylesheet" type="text/css" href="/login/css/main.css">
	<!--===============================================================================================-->


</head>

<body>

	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				<div class="login100-pic js-tilt" data-tilt>
					<img src="/login/images/img-login.png" alt="IMG">
				</div>

				<form class="login100-form validate-form formSubmit"  
					novalidate="">
					<span class="login100-form-title">
						Member Signup
					</span>



					<div style="display: flex;" class="wrap-input100 validate-input"
						data-validate="valid 10-digit phone number required: 91xxxxxxxx">
						<input type="tel" value="+91" name="code" disabled size="1">
						<input class="input100" type="tel" id='phone' name="phone_number" required placeholder="xxxxxxxxxx">
						<span class="focus-input100"></span>
						<span class="symbol-input100">
							<i class="fa fa-phone" aria-hidden="true"></i>
						</span>
					</div>
					
						<div id="message" class="text-center  p-t-12">
							<span  id="messageDisplay" class="txt1 text-danger">
		
							</span>

						</div>
						


							<div hidden id="error_message" class="text-center  p-t-12">
								<span class="txt1 text-danger">

									Please enter a valid 10-digit phone number
								</span>

							</div>

							<div class="text-center p-t-12">
								<span class="txt1 text-danger">

								</span>

							</div>
							<div class="container-login100-form-btn">
								<button class="login100-form-btn" type="submit">
									SignUp
								</button>
							</div>



							<div class="text-center p-t-136">
								<a class="txt2" href="/login">
									Already have account ?
									<i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
								</a>
							</div>
				</form>
			</div>
		</div>
	</div>




	<!--===============================================================================================-->
	<script src="/login/vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="/login/vendor/bootstrap/js/popper.js"></script>
	<script src="/login/vendor/bootstrap/js/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="/login/vendor/select2/select2.min.js"></script>
	<!--===============================================================================================-->
	<script src="/login/vendor/tilt/tilt.jquery.min.js"></script>
	<script>
		$('.js-tilt').tilt({
			scale: 1.1
		})
	</script>
	<!--===============================================================================================-->
	<script src="/login/js/main.js"></script>


<!-- 	<script>

		function validateForm() {
			const phoneNumber = document.getElementById("phone").value;
			const phonePattern = /^\d{10}$/;
			if (!phonePattern.test(phoneNumber)) {
				document.getElementById("error_message").style.display = "block"
				/* alert("Please enter a valid 10-digit phone number"); */
				return false;
			}
			return true;
		}
	</script>
 -->

<script>
	const form = document.querySelector('.formSubmit')
	form.addEventListener('submit', (event) => {
		event.preventDefault()

		const phone_number = $('#phone').val()
		if (!form.checkValidity() || phone_number.length >= 1) {
			const phonePattern = /^\d{10}$/;
			if (!phonePattern.test(phone_number)) {
				$('#error_message').attr('hidden', false)
				/* alert("Please enter a valid 10-digit phone number"); */
				return false;
			}
			$('#error_message').attr('hidden', true)
		}
		fetch('/signup', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({
				phone_number
			})

		})
			.then(response => {
				return response.json()

			}).then(data => {
				console.log(data);
				if (data.status === true) {
					window.location.href = "/verify"
				} else {
					$('#messageDisplay').html(data.message)
					$('#message').attr('hidden',false)
					setTimeout(function () {
					
						$('#message').attr('hidden',true)
					}, 5000);
				}

			})

	})
</script>


</body>

</html>